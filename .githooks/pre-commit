#!/bin/sh

# Pre-commit hook to check bundle sizes
echo "üîç Checking bundle sizes before commit..."

# Build packages to ensure fresh bundle analysis
npm run build

# Run size check
if npm run size:check; then
    echo "‚úÖ Bundle size check passed"
    exit 0
else
    echo "‚ùå Bundle size check failed!"
    echo ""
    echo "Some packages exceed their size targets."
    echo "Please review and optimize before committing:"
    echo ""
    echo "1. Run 'npm run size:report' for detailed analysis"
    echo "2. Check docs/performance/bundle-optimization.md for guidance"
    echo "3. Use docs/OPTIMIZATION-CHECKLIST.md for quick fixes"
    echo ""
    echo "To skip this check (not recommended): git commit --no-verify"
    exit 1
fi
