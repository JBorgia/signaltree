import{a as p,b as y,c as A}from"./chunk-3C4WTMTA.js";import{b as z,c as F,d as D,e as N,f as k,g as I,h as R,k as P}from"./chunk-QAZQSZCQ.js";import{e as W}from"./chunk-QBPEN4DG.js";import{$a as c,Ib as o,Jb as C,Kb as s,Na as a,Nb as f,Ob as h,Pb as b,Tb as M,Ub as v,Xa as S,oc as _,pb as g,pc as w,qb as i,rb as t,tc as E,vc as T,xb as u,zb as x}from"./chunk-STRTG7VY.js";function q(m,r){if(m&1&&(i(0,"div",27)(1,"span"),o(2),t(),i(3,"span"),o(4),t()()),m&2){let n=r.$implicit;a(2),s("",n.strategy,":"),a(2),s("",n.duration.toFixed(2),"ms")}}function B(m,r){if(m&1&&(i(0,"div")(1,"strong"),o(2,"Performance Test Results:"),t(),i(3,"div",25),c(4,q,5,2,"div",26),t()()),m&2){let n=x();a(4),g("ngForOf",n.performanceResults)}}function j(m,r){if(m&1&&(i(0,"span",28),o(1),t()),m&2){let n=r.$implicit;a(),s(" ",n," ")}}var O=class m{selectedStrategy="deep";performanceResults=[];store=W({numbers:Array.from({length:100},()=>Math.floor(Math.random()*1e3)),multiplier:2,searchTerm:"",computeCount:0,strategy:"deep"}).with(A());filterFunction=p((r,n)=>r.filter(e=>e.toString().includes(n)));computeFunction=p((r,n)=>r.map(e=>e*n));numbers=this.store.$.numbers;multiplier=this.store.$.multiplier;searchTerm=this.store.$.searchTerm;computeCount=this.store.$.computeCount;filteredNumbers=this.store.memoize(r=>this.filterFunction(r.numbers,r.searchTerm),"filteredNumbers");expensiveComputation=this.store.memoize(r=>{this.store.$.computeCount.set(r.computeCount+1);let n=this.filteredNumbers();return this.computeFunction(n,r.multiplier)},"expensiveComputation");onStrategyChange(){switch(this.selectedStrategy){case"shallow":this.filterFunction=p((r,n)=>n?r.filter(e=>e.toString().includes(n)):r),this.computeFunction=p((r,n)=>r.map(e=>e*n));break;case"reference":this.filterFunction=y((r,n)=>n?r.filter(e=>e.toString().includes(n)):r),this.computeFunction=y((r,n)=>r.map(e=>e*n));break;default:break}this.store.$.strategy.set(this.selectedStrategy),this.clearMemoCache()}getStrategyDescription(){switch(this.selectedStrategy){case"deep":return"Thorough equality check - slower but catches all changes";case"shallow":return"Check primitive properties only - good balance of speed/accuracy";case"reference":return"Fastest - only exact reference matches count as cache hits";default:return""}}runPerformanceTest(){this.performanceResults=[],["deep","shallow","reference"].forEach(n=>{this.selectedStrategy=n,this.onStrategyChange();let e=performance.now();for(let l=0;l<100;l++)this.expensiveComputation(),this.filteredNumbers();let d=performance.now()-e;this.performanceResults.push({strategy:n,duration:d})}),console.log("Performance Test Results:",this.performanceResults)}addRandomNumbers(){let r=Array.from({length:20},()=>Math.floor(Math.random()*1e3));this.store.$.numbers.update(n=>[...n,...r])}clearMemoCache(){this.store.clearCache()}getCacheStats(){return this.store.getMetrics?.()||{cacheHits:0,cacheMisses:0,updates:0,computations:0,averageUpdateTime:0}}static \u0275fac=function(n){return new(n||m)};static \u0275cmp=S({type:m,selectors:[["app-memoization-demo"]],decls:67,vars:13,consts:[[1,"container","mx-auto","p-6"],[1,"text-3xl","font-bold","mb-6"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4"],["for","strategySelect",1,"block","text-sm","font-medium","mb-2"],["id","strategySelect",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],["value","deep"],["value","shallow"],["value","reference"],[1,"text-xs","text-gray-600","mt-1"],["for","multiplierInput",1,"block","text-sm","font-medium","mb-2"],["id","multiplierInput","type","number",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],["for","searchTermInput",1,"block","text-sm","font-medium","mb-2"],["id","searchTermInput","type","text","placeholder","Filter numbers...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],[1,"flex","space-x-2"],[1,"flex-1","px-4","py-2","bg-blue-500","text-white","rounded-md","hover:bg-blue-600",3,"click"],[1,"flex-1","px-4","py-2","bg-green-500","text-white","rounded-md","hover:bg-green-600",3,"click"],[1,"w-full","px-4","py-2","bg-red-500","text-white","rounded-md","hover:bg-red-600",3,"click"],[4,"ngIf"],[1,"bg-gray-100","p-2","rounded","text-sm","mt-2"],[1,"max-h-64","overflow-y-auto"],[1,"grid","grid-cols-4","gap-2","mt-2"],["class","bg-blue-100 px-2 py-1 rounded text-sm",4,"ngFor","ngForOf"],[1,"bg-gray-100","p-3","rounded","mt-2"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"bg-blue-100","px-2","py-1","rounded","text-sm"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"h1",1),o(2,"SignalTree Memoization Demo"),t(),i(3,"div",2)(4,"div",3)(5,"h2",4),o(6,"Controls"),t(),i(7,"div",5)(8,"div")(9,"label",6),o(10,"Memoization Strategy:"),t(),i(11,"select",7),b("ngModelChange",function(l){return h(e.selectedStrategy,l)||(e.selectedStrategy=l),l}),u("ngModelChange",function(){return e.onStrategyChange()}),i(12,"option",8),o(13,"Deep Equality (Default)"),t(),i(14,"option",9),o(15,"Shallow Equality (Fast)"),t(),i(16,"option",10),o(17,"Reference Equality (Fastest)"),t()(),i(18,"p",11),o(19),t()(),i(20,"div")(21,"label",12),o(22,"Multiplier:"),t(),i(23,"input",13),b("ngModelChange",function(l){return h(e.multiplier,l)||(e.multiplier=l),l}),t()(),i(24,"div")(25,"label",14),o(26,"Search Term:"),t(),i(27,"input",15),b("ngModelChange",function(l){return h(e.searchTerm,l)||(e.searchTerm=l),l}),t()(),i(28,"div",16)(29,"button",17),u("click",function(){return e.addRandomNumbers()}),o(30," Add Random Numbers "),t(),i(31,"button",18),u("click",function(){return e.runPerformanceTest()}),o(32," Performance Test "),t()(),i(33,"button",19),u("click",function(){return e.clearMemoCache()}),o(34," Clear Memo Cache "),t()()(),i(35,"div",3)(36,"h2",4),o(37,"Memoized Computations"),t(),i(38,"div",5)(39,"div")(40,"strong"),o(41,"Current Strategy:"),t(),o(42),t(),i(43,"div")(44,"strong"),o(45,"Compute Count:"),t(),o(46),t(),i(47,"div")(48,"strong"),o(49,"Numbers Count:"),t(),o(50),t(),i(51,"div")(52,"strong"),o(53,"Filtered & Multiplied Sum:"),t(),o(54),t(),c(55,B,5,1,"div",20),i(56,"div")(57,"strong"),o(58,"Cache Stats:"),t(),i(59,"pre",21),o(60),M(61,"json"),t()(),i(62,"div",22)(63,"strong"),o(64,"Filtered Numbers:"),t(),i(65,"div",23),c(66,j,2,1,"span",24),t()()()()()()),n&2&&(a(11),f("ngModel",e.selectedStrategy),a(8),s(" ",e.getStrategyDescription()," "),a(4),f("ngModel",e.multiplier),a(4),f("ngModel",e.searchTerm),a(15),s(" ",e.selectedStrategy),a(4),s(" ",e.computeCount()),a(4),s(" ",e.numbers().length),a(4),s(" ",e.expensiveComputation()," "),a(),g("ngIf",e.performanceResults.length>0),a(5),C(v(61,11,e.getCacheStats())),a(6),g("ngForOf",e.filteredNumbers()))},dependencies:[T,_,w,P,I,R,z,N,k,F,D,E],encapsulation:2})};export{O as MemoizationDemoComponent};
