import{c as D,d as E,i as I,q as F,r as T,s as k,w as z}from"./chunk-AQ5ZLTRX.js";import{i as N,j as W,q as $,u as B}from"./chunk-3DDI6FWM.js";import{Ab as m,Cb as w,Dc as O,Hc as S,Ja as a,Kb as L,Lb as o,Mb as g,Nb as p,Sb as u,Tb as h,Ub as x,Ya as C,ac as y,cc as P,hc as c,ib as _,jb as M,mb as v,nb as b,pb as e,qb as t}from"./chunk-YYEXL5C7.js";import"./chunk-A3ECCK3J.js";var U=(d,i)=>i.id;function q(d,i){if(d&1&&(e(0,"span",32),o(1),t()),d&2){let l=w().$implicit;a(),p("User: ",l.userId)}}function R(d,i){if(d&1&&(e(0,"div",28)(1,"span",29),o(2),y(3,"date"),t(),e(4,"span",30),o(5),t(),e(6,"span",31),o(7),t(),_(8,q,2,1,"span",32),t()),d&2){let l=i.$implicit;L("log-"+l.level),a(2),g(P(3,6,l.timestamp,"short")),a(3),g(l.level.toUpperCase()),a(2),g(l.message),a(),M(l.userId?8:-1)}}function V(d,i){d&1&&(e(0,"div",27),o(1,"No logs match the current filters"),t())}var A=class d{codeExample=`// Create tree with memoization
const tree = signalTree({
  logs: [] as Log[],
  filters: {
    level: 'all',
    search: '',
    userId: null
  }
}).with(memoization()).with(entities());

// Memoized filtered logs - cached automatically!
const filteredLogs = tree.memoize(state => {
  let logs = state.logs;

  if (state.filters.level !== 'all') {
    logs = logs.filter(log => log.level === state.filters.level);
  }

  if (state.filters.search) {
    logs = logs.filter(log =>
      log.message.toLowerCase().includes(
        state.filters.search.toLowerCase()
      )
    );
  }

  if (state.filters.userId) {
    logs = logs.filter(log => log.userId === state.filters.userId);
  }

  return logs;
}, 'filtered-logs');

// Use in component - auto-updates when filters change!
filteredLogs(); // Returns cached result`;selectedLevel="all";searchText="";userIdFilter="";cacheHitCount=0;lastFilterTime=0;tree=N({logs:W({selectId:i=>i.id}),filters:{level:"all",search:"",userId:null}}).with($()).with(B());filteredLogs=c(()=>{let i=performance.now(),l=this.tree.$.logs.all(),n=this.tree.$.filters.level(),s=this.tree.$.filters.search(),r=this.tree.$.filters.userId();if(n!=="all"&&(l=l.filter(f=>f.level===n)),s){let f=s.toLowerCase();l=l.filter(H=>H.message.toLowerCase().includes(f))}return r&&(l=l.filter(f=>f.userId===r)),this.lastFilterTime=performance.now()-i,this.cacheHitCount++,l});totalLogs=c(()=>this.tree.$.logs.count());filteredCount=c(()=>this.filteredLogs().length);displayedLogs=c(()=>this.filteredLogs().slice(0,100));cacheHits=c(()=>this.cacheHitCount);filterTime=c(()=>this.lastFilterTime.toFixed(3));performanceBenefit=c(()=>{let i=this.totalLogs();return i<100?"Add more logs to see performance benefits":i<1e3?"Moderate benefit with "+i+" logs":"Significant benefit! Without memoization would re-filter "+i+" logs on every render"});constructor(){this.addInitialLogs()}updateLevelFilter(i){this.tree.$.filters.level.set(i)}updateSearchFilter(i){this.tree.$.filters.search.set(i)}updateUserFilter(i){this.tree.$.filters.userId.set(i||null)}addRandomLog(){let i=["info","warn","error"],l=["User logged in successfully","Database connection established","API request completed","Cache miss, fetching from database","Warning: High memory usage detected","Error: Failed to connect to external service","Payment processed successfully","Email sent to user","Session expired","File uploaded successfully"],n=["user-1","user-2","user-3","user-4",null],s={id:`log-${Date.now()}-${Math.random()}`,timestamp:new Date,level:i[Math.floor(Math.random()*i.length)],message:l[Math.floor(Math.random()*l.length)],userId:n[Math.floor(Math.random()*n.length)]||void 0};this.tree.$.logs.addOne(s)}addBulkLogs(){let i=[];for(let l=0;l<1e3;l++){let n=["info","warn","error"],s=["User logged in successfully","Database query executed","API endpoint called","Cache updated","Warning: Slow query detected","Error: Network timeout","Transaction completed","Email queued","Session refreshed","Data synchronized"],r=["user-1","user-2","user-3","user-4","user-5",null];i.push({id:`log-${Date.now()}-${l}-${Math.random()}`,timestamp:new Date(Date.now()-Math.random()*864e5),level:n[Math.floor(Math.random()*n.length)],message:s[Math.floor(Math.random()*s.length)],userId:r[Math.floor(Math.random()*r.length)]||void 0})}this.tree.$.logs.addMany(i)}clearLogs(){this.tree.$.logs.clear(),this.cacheHitCount=0}addInitialLogs(){let i=[{id:"1",timestamp:new Date,level:"info",message:"Application started successfully",userId:"user-1"},{id:"2",timestamp:new Date,level:"info",message:"Database connection established"},{id:"3",timestamp:new Date,level:"warn",message:"High memory usage detected: 85%"},{id:"4",timestamp:new Date,level:"error",message:"Failed to fetch user profile",userId:"user-2"},{id:"5",timestamp:new Date,level:"info",message:"Cache cleared successfully"}];this.tree.$.logs.addMany(i)}static \u0275fac=function(l){return new(l||d)};static \u0275cmp=C({type:d,selectors:[["app-log-filtering-demo"]],decls:79,vars:13,consts:[[1,"log-filtering-demo"],[1,"demo-description"],[1,"controls"],[1,"control-group"],["for","level"],["id","level",3,"ngModelChange","ngModel"],["value","all"],["value","info"],["value","warn"],["value","error"],["for","search"],["id","search","type","text","placeholder","Search messages...",3,"ngModelChange","ngModel"],["for","userId"],["id","userId","type","text","placeholder","Filter by user...",3,"ngModelChange","ngModel"],[1,"button-group"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"code-section"],[1,"stats"],[1,"stat-card"],[1,"stat-label"],[1,"stat-value"],[1,"performance-info"],[1,"log-viewer"],[1,"log-list"],[1,"log-entry",3,"class"],[1,"empty-state"],[1,"log-entry"],[1,"log-timestamp"],[1,"log-level"],[1,"log-message"],[1,"log-user"]],template:function(l,n){l&1&&(e(0,"div",0)(1,"h2"),o(2,"Memoization: Log Filtering Performance"),t(),e(3,"div",1)(4,"p"),o(5),t()(),e(6,"div",2)(7,"div",3)(8,"label",4),o(9,"Level:"),t(),e(10,"select",5),x("ngModelChange",function(r){return h(n.selectedLevel,r)||(n.selectedLevel=r),r}),m("ngModelChange",function(r){return n.updateLevelFilter(r)}),e(11,"option",6),o(12,"All Levels"),t(),e(13,"option",7),o(14,"Info"),t(),e(15,"option",8),o(16,"Warning"),t(),e(17,"option",9),o(18,"Error"),t()()(),e(19,"div",3)(20,"label",10),o(21,"Search:"),t(),e(22,"input",11),x("ngModelChange",function(r){return h(n.searchText,r)||(n.searchText=r),r}),m("ngModelChange",function(r){return n.updateSearchFilter(r)}),t()(),e(23,"div",3)(24,"label",12),o(25,"User ID:"),t(),e(26,"input",13),x("ngModelChange",function(r){return h(n.userIdFilter,r)||(n.userIdFilter=r),r}),m("ngModelChange",function(r){return n.updateUserFilter(r)}),t()(),e(27,"div",14)(28,"button",15),m("click",function(){return n.addRandomLog()}),o(29," Add Random Log "),t(),e(30,"button",16),m("click",function(){return n.addBulkLogs()}),o(31," Add 1000 Logs "),t(),e(32,"button",17),m("click",function(){return n.clearLogs()}),o(33," Clear All "),t()()(),e(34,"div",18)(35,"h3"),o(36,"\u{1F4BB} Code Example"),t(),e(37,"pre")(38,"code"),o(39),t()()(),e(40,"div",19)(41,"div",20)(42,"span",21),o(43,"Total Logs:"),t(),e(44,"span",22),o(45),t()(),e(46,"div",20)(47,"span",21),o(48,"Filtered Logs:"),t(),e(49,"span",22),o(50),t()(),e(51,"div",20)(52,"span",21),o(53,"Cache Hits:"),t(),e(54,"span",22),o(55),t()(),e(56,"div",20)(57,"span",21),o(58,"Filter Time:"),t(),e(59,"span",22),o(60),t()()(),e(61,"div",23)(62,"p")(63,"strong"),o(64,"Performance Impact:"),t()(),e(65,"ul")(66,"li"),o(67,"\u2705 Memoized: Filters cached until logs or filters change"),t(),e(68,"li"),o(69),t(),e(70,"li"),o(71),t()()(),e(72,"div",24)(73,"h3"),o(74),t(),e(75,"div",25),v(76,R,9,9,"div",26,U,!1,V,2,0,"div",27),t()()()),l&2&&(a(5),p(" Demonstrates memoization with entity filtering. With ",n.totalLogs()," logs, filtering is cached and only recalculates when filters or logs change. "),a(5),u("ngModel",n.selectedLevel),a(12),u("ngModel",n.searchText),a(4),u("ngModel",n.userIdFilter),a(13),g(n.codeExample),a(6),g(n.totalLogs()),a(5),g(n.filteredCount()),a(5),g(n.cacheHits()),a(5),p("",n.filterTime(),"ms"),a(9),p(" \u274C Without: Would re-filter all ",n.totalLogs()," logs on every render "),a(2),p("\u{1F680} Benefit: ",n.performanceBenefit()),a(3),p("Filtered Logs (",n.filteredCount(),")"),a(2),b(n.displayedLogs()))},dependencies:[S,z,T,k,D,F,E,I,O],styles:[".log-filtering-demo[_ngcontent-%COMP%]{padding:20px}.demo-description[_ngcontent-%COMP%]{background:#f5f5f5;padding:15px;border-radius:8px;margin-bottom:20px}.controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:flex-end;justify-content:space-between;margin-bottom:20px;padding:15px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-left:auto}.control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.control-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .control-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;border-radius:4px;font-size:14px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-weight:600;transition:all .2s}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px)}.stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:20px}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;gap:5px}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666}.stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#007bff}.performance-info[_ngcontent-%COMP%]{background:#e7f3ff;padding:15px;border-radius:8px;margin-bottom:20px;border-left:4px solid #007bff}.performance-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:10px 0 0;padding-left:20px}.performance-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:5px 0}.log-viewer[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.log-viewer[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#333}.log-list[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;border:1px solid #ddd;border-radius:4px}.log-entry[_ngcontent-%COMP%]{display:flex;gap:10px;padding:10px;border-bottom:1px solid #eee;font-family:Courier New,monospace;font-size:13px;align-items:center}.log-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.log-info[_ngcontent-%COMP%]{background:#e3f2fd}.log-warn[_ngcontent-%COMP%]{background:#fff3e0}.log-error[_ngcontent-%COMP%]{background:#ffebee}.log-timestamp[_ngcontent-%COMP%]{color:#666;white-space:nowrap}.log-level[_ngcontent-%COMP%]{font-weight:700;padding:2px 8px;border-radius:4px;white-space:nowrap}.log-info[_ngcontent-%COMP%]   .log-level[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.log-warn[_ngcontent-%COMP%]   .log-level[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.log-error[_ngcontent-%COMP%]   .log-level[_ngcontent-%COMP%]{background:#f44336;color:#fff}.log-message[_ngcontent-%COMP%]{flex:1}.log-user[_ngcontent-%COMP%]{color:#666;font-size:12px;white-space:nowrap}.empty-state[_ngcontent-%COMP%]{padding:40px;text-align:center;color:#999;font-style:italic}.code-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}.code-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#333}.code-section[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#f5f5f5;padding:15px;border-radius:4px;overflow-x:auto;margin:0}.code-section[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:13px;line-height:1.6;color:#333}"]})};export{A as LogFilteringDemoComponent};
