import{i as b,m as v}from"./chunk-3DDI6FWM.js";import{Bb as p,Hc as f,Ja as r,Lb as n,Mb as l,Ya as g,ic as h,sa as d,sb as e,tb as t,zb as u}from"./chunk-YYEXL5C7.js";import"./chunk-A3ECCK3J.js";var C=class E{ops=d(1e3);batchNotificationDelayMs=d(0);batchedTime=d(null);unbatchedTime=d(null);batchedRenders=d(0);unbatchedRenders=d(0);runComparison(){this.runUnbatched(),this.runBatched()}runUnbatched(){let m=b({counter:0}),i=0;h(()=>{m.$.counter(),i++});let o=this.ops(),s=performance.now();for(let c=0;c<o;c++)m.$.counter.update(y=>y+1);let a=performance.now();this.unbatchedTime.set(a-s),this.unbatchedRenders.set(i)}runBatched(){let m=b({counter:0}).with(v({enabled:!0,notificationDelayMs:this.batchNotificationDelayMs()})),i=0;h(()=>{m.$.counter(),i++});let o=this.ops(),s=performance.now();for(let a=0;a<o;a++)m.$.counter.update(c=>c+1);Promise.resolve().then(()=>{let a=performance.now();this.batchedTime.set(a-s),this.batchedRenders.set(i)})}static \u0275fac=function(i){return new(i||E)};static \u0275cmp=g({type:E,selectors:[["app-batching-comparison"]],decls:41,vars:6,consts:[[1,"example-card"],[1,"controls"],["type","number",3,"input","value"],[3,"click"],[1,"results"],[1,"note"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"h2"),n(2,"Batching Comparison"),t(),e(3,"div",1)(4,"label"),n(5," Operations: "),e(6,"input",2),p("input",function(a){return o.ops.set(a.target.valueAsNumber||0)}),t()(),e(7,"label"),n(8," Batch notification delay (ms): "),e(9,"input",2),p("input",function(a){return o.batchNotificationDelayMs.set(a.target.valueAsNumber||0)}),t()(),e(10,"button",3),p("click",function(){return o.runComparison()}),n(11,"Run Comparison"),t()(),e(12,"div",4)(13,"h3"),n(14,"Results"),t(),e(15,"table")(16,"thead")(17,"tr")(18,"th"),n(19,"Mode"),t(),e(20,"th"),n(21,"Time (ms)"),t(),e(22,"th"),n(23,"Render Count"),t()()(),e(24,"tbody")(25,"tr")(26,"td"),n(27,"Unbatched"),t(),e(28,"td"),n(29),t(),e(30,"td"),n(31),t()(),e(32,"tr")(33,"td"),n(34,"Batched"),t(),e(35,"td"),n(36),t(),e(37,"td"),n(38),t()()()(),e(39,"p",5),n(40," Note: Batched timings are measured from call start to the end of synchronous loop; batch notifications may be delivered asynchronously depending on delay. "),t()()()),i&2&&(r(6),u("value",o.ops()),r(3),u("value",o.batchNotificationDelayMs()),r(20),l(o.unbatchedTime()??"\u2014"),r(2),l(o.unbatchedRenders()),r(5),l(o.batchedTime()??"\u2014"),r(2),l(o.batchedRenders()))},dependencies:[f],styles:[".example-card[_ngcontent-%COMP%]{padding:1rem;border:1px solid #e0e0e0;border-radius:6px}.controls[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.results[_ngcontent-%COMP%]{margin-top:1rem}.note[_ngcontent-%COMP%]{color:#666;font-size:12px}"]})};export{C as BatchingComparisonComponent};
