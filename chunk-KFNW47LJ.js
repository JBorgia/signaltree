import{a as $}from"./chunk-QU3PGVTT.js";import{a as J}from"./chunk-YLUDIB2Y.js";import{b as V,c as P,d as B,k as L}from"./chunk-A6RTFK75.js";import{e as R}from"./chunk-3XX2APIE.js";import{Fb as b,Gb as t,Hb as _,Ib as s,Jb as E,La as l,Lb as w,Mb as D,Nb as k,Rb as F,Sb as M,Va as S,Yb as u,Za as v,a as C,b as y,ga as T,ma as x,mc as O,na as h,nb as c,nc as I,ob as i,oc as N,pb as e,tb as f,tc as A,vb as p,xb as g}from"./chunk-M6ZH6AMU.js";function U(a,o){if(a&1){let r=f();i(0,"button",38),p("click",function(){let d=x(r).$implicit,m=g();return h(m.setFilter(d))}),t(1),F(2,"titlecase"),e()}if(a&2){let r=o.$implicit,n=g();b(n.getFilterClass(r)),l(),E(" ",M(2,4,r)," (",n.getFilterCount(r),") ")}}function j(a,o){if(a&1){let r=f();i(0,"div",39)(1,"input",40),p("change",function(){let d=x(r).$implicit,m=g();return h(m.toggleTodo(d.id))}),e(),i(2,"span",41),t(3),e(),i(4,"button",42),p("click",function(){let d=x(r).$implicit,m=g();return h(m.removeTodo(d.id))}),t(5," \u2715 "),e()()}if(a&2){let r=o.$implicit;l(),c("checked",r.completed),l(),b(r.completed?"line-through text-gray-500":"text-gray-900"),l(),s(" ",r.title," ")}}function z(a,o){a&1&&(i(0,"div",43),t(1," No todos found "),e())}var W=class a{performanceMonitor=T($);nextId=1;store=R({todos:[],filter:"all",newTodoTitle:""});todos=this.store.state.todos;filter=this.store.state.filter;newTodoTitle="";activeCount=u(()=>this.todos().filter(o=>!o.completed).length);completedCount=u(()=>this.todos().filter(o=>o.completed).length);filteredTodos=u(()=>{let o=this.todos();switch(this.filter()){case"active":return o.filter(n=>!n.completed);case"completed":return o.filter(n=>n.completed);default:return o}});stateJson=u(()=>JSON.stringify({todos:this.todos().length+" items",filter:this.filter(),counts:{total:this.todos().length,active:this.activeCount(),completed:this.completedCount()}},null,2));activeTodos=u(()=>this.todos().filter(o=>!o.completed).length);completedTodos=u(()=>this.todos().filter(o=>o.completed).length);deleteTodo=o=>this.removeTodo(o);filters=["all","active","completed"];lastOperation="None";operationCount=0;trackOperation(o){this.lastOperation=o,this.operationCount++}addTodo(){if(!this.newTodoTitle.trim())return;let o=performance.now(),r={id:this.nextId++,title:this.newTodoTitle.trim(),completed:!1,createdAt:new Date};this.store.state.todos.update(n=>[...n,r]),this.newTodoTitle="",this.trackOperation("Add Todo"),this.performanceMonitor.recordSignalTreeOperation("addTodo",performance.now()-o,{todoCount:this.todos().length})}toggleTodo(o){this.store.state.todos.update(r=>r.map(n=>n.id===o?y(C({},n),{completed:!n.completed}):n)),this.trackOperation("Toggle Todo")}removeTodo(o){this.store.state.todos.update(r=>r.filter(n=>n.id!==o)),this.trackOperation("Remove Todo")}setFilter(o){this.store.state.filter.set(o),this.trackOperation("Set Filter")}clearCompleted(){this.store.state.todos.update(o=>o.filter(r=>!r.completed)),this.trackOperation("Clear Completed")}loadSampleData(){let o=J(10);this.store.state.todos.set(o),this.trackOperation("Load Sample Data")}getFilterClass(o){let r="px-3 py-1 rounded text-sm transition-colors",n=this.filter()===o;return`${r} ${n?"filter-btn-active":"filter-btn-inactive"}`}getFilterCount(o){switch(o){case"all":return this.todos().length;case"active":return this.activeCount();case"completed":return this.completedCount()}}trackTodo(o,r){return r.id}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=S({type:a,selectors:[["app-core-demo"]],decls:138,vars:15,consts:[[1,"container","mx-auto","px-4","sm:px-6","lg:px-8","py-6"],[1,"text-2xl","sm:text-3xl","font-bold","mb-6"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","lg:gap-8"],[1,"bg-white","rounded-lg","shadow","p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-semibold","mb-4"],[1,"mb-4"],[1,"flex","flex-col","sm:flex-row","gap-2"],["type","text","placeholder","Add a new todo...",1,"flex-1","px-3","py-2","form-input","min-h-touch",3,"ngModelChange","keyup.enter","ngModel"],[1,"px-4","py-2","bg-blue-500","text-white","rounded-md","hover:bg-blue-600","disabled:opacity-50","disabled:cursor-not-allowed","min-h-touch","whitespace-nowrap",3,"click","disabled"],[1,"flex","flex-wrap","gap-2"],["class","min-h-touch",3,"class","click",4,"ngFor","ngForOf"],[1,"space-y-2"],["class","flex items-center gap-3 p-3 bg-gray-50 rounded-md",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center text-gray-500 py-8",4,"ngIf"],[1,"mt-4","flex","flex-col","sm:flex-row","gap-2"],[1,"px-4","py-2","bg-green-500","text-white","rounded-md","hover:bg-green-600","min-h-touch",3,"click"],[1,"px-4","py-2","bg-red-500","text-white","rounded-md","hover:bg-red-600","disabled:opacity-50","disabled:cursor-not-allowed","min-h-touch",3,"click","disabled"],[1,"space-y-4"],[1,"font-medium","text-gray-700","mb-2"],[1,"bg-gray-50","p-3","rounded"],[1,"text-sm","space-y-1"],[1,"bg-gray-50","p-3","rounded","text-sm","overflow-auto","max-h-64"],[1,"mt-8","bg-blue-50","rounded-lg","p-6"],[1,"text-xl","font-semibold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"font-medium","text-blue-800","mb-2"],[1,"text-sm","text-blue-700"],[1,"mt-8","bg-yellow-50","rounded-lg","p-6"],[1,"text-xl","font-semibold","mb-4","text-yellow-800"],[1,"bg-yellow-100","p-4","rounded-lg"],[1,"font-semibold","text-yellow-800","mb-2"],[1,"text-sm","text-yellow-700","mb-3"],[1,"bg-white","p-3","rounded","border-l-4","border-yellow-500"],[1,"font-medium","text-yellow-800","mb-2"],[1,"text-sm","font-mono","text-gray-700","space-y-1"],[1,"text-blue-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"text-sm","text-yellow-700"],[1,"min-h-touch",3,"click"],[1,"flex","items-center","gap-3","p-3","bg-gray-50","rounded-md"],["type","checkbox",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500",3,"change","checked"],[1,"flex-1"],[1,"text-red-500","hover:text-red-700",3,"click"],[1,"text-center","text-gray-500","py-8"]],template:function(r,n){r&1&&(i(0,"div",0)(1,"h1",1),t(2,"SignalTree Core Demo"),e(),i(3,"div",2)(4,"div",3)(5,"h2",4),t(6," Todo Application "),e(),i(7,"div",5)(8,"div",6)(9,"input",7),k("ngModelChange",function(m){return D(n.newTodoTitle,m)||(n.newTodoTitle=m),m}),p("keyup.enter",function(){return n.addTodo()}),e(),i(10,"button",8),p("click",function(){return n.addTodo()}),t(11," Add "),e()()(),i(12,"div",5)(13,"div",9),v(14,U,3,6,"button",10),e()(),i(15,"div",11),v(16,j,6,4,"div",12)(17,z,2,0,"div",13),e(),i(18,"div",14)(19,"button",15),p("click",function(){return n.loadSampleData()}),t(20," Load Sample Data "),e(),i(21,"button",16),p("click",function(){return n.clearCompleted()}),t(22," Clear Completed "),e()()(),i(23,"div",3)(24,"h2",4),t(25,"State Inspector"),e(),i(26,"div",17)(27,"div")(28,"h3",18),t(29,"Computed Values"),e(),i(30,"div",19)(31,"div",20)(32,"div")(33,"strong"),t(34,"Total Todos:"),e(),t(35),e(),i(36,"div")(37,"strong"),t(38,"Active:"),e(),t(39),e(),i(40,"div")(41,"strong"),t(42,"Completed:"),e(),t(43),e(),i(44,"div")(45,"strong"),t(46,"Current Filter:"),e(),t(47),e(),i(48,"div")(49,"strong"),t(50,"Filtered Count:"),e(),t(51),e()()()(),i(52,"div")(53,"h3",18),t(54,"Raw State"),e(),i(55,"pre",21),t(56),e()(),i(57,"div")(58,"h3",18),t(59,"Performance"),e(),i(60,"div",19)(61,"div",20)(62,"div")(63,"strong"),t(64,"Last Operation:"),e(),t(65),e(),i(66,"div")(67,"strong"),t(68,"Operation Count:"),e(),t(69),e()()()()()()(),i(70,"div",22)(71,"h2",23),t(72,"Core Features Demonstrated"),e(),i(73,"div",24)(74,"div")(75,"h3",25),t(76,"Signal-based State"),e(),i(77,"p",26),t(78," All state is managed through Angular signals, providing fine-grained reactivity and automatic change detection. "),e()(),i(79,"div")(80,"h3",25),t(81,"Computed Properties"),e(),i(82,"p",26),t(83," Derived state is automatically computed and cached, only updating when dependencies change. "),e()(),i(84,"div")(85,"h3",25),t(86,"Immutable Updates"),e(),i(87,"p",26),t(88," State updates maintain immutability while providing a clean, intuitive API. "),e()(),i(89,"div")(90,"h3",25),t(91,"Type Safety"),e(),i(92,"p",26),t(93," Full TypeScript support with type inference and compile-time checks. "),e()()()(),i(94,"div",27)(95,"h2",28),t(96," \u{1F525} Live Callable Syntax Demo (Pre-Transform) "),e(),i(97,"div",17)(98,"div",29)(99,"h3",30),t(100," Real Component Using Callable Syntax - RAW VERSION "),e(),i(101,"p",31),t(102," This component uses the actual callable syntax patterns. "),i(103,"strong"),t(104,"TypeScript errors are expected"),e(),t(105," - they prove the transformation is needed and working correctly. "),e(),i(106,"div",32)(107,"h4",33),t(108," Live Callable Syntax Examples: "),e(),i(109,"div",34)(110,"div")(111,"span",35),t(112,"\u2705 Value setting:"),e(),t(113," this.store.state.todos(sampleTodos) "),e(),i(114,"div")(115,"span",35),t(116,"\u2705 Function updates:"),e(),t(117," this.store.state.todos(todos => [...todos]) "),e(),i(118,"div")(119,"span",35),t(120,"\u2705 Filter setting:"),e(),t(121," this.store.state.filter('active') "),e()()()(),i(122,"div",36)(123,"div")(124,"h4",33),t(125," \u26A0\uFE0F Expected Errors "),e(),i(126,"p",37),t(127,' TypeScript shows "Expected 0 arguments, but got 1" - this proves the transformation is necessary. '),e()(),i(128,"div")(129,"h4",33),t(130," \u{1F527} Build Transform "),e(),i(131,"p",37),t(132," Build-time transformer converts these to .set()/.update() calls automatically. "),e()(),i(133,"div")(134,"h4",33),t(135,"\u{1F3AF} End Result"),e(),i(136,"p",37),t(137," Clean, callable syntax with zero runtime overhead and full type safety after transformation. "),e()()()()()()),r&2&&(l(9),w("ngModel",n.newTodoTitle),l(),c("disabled",!n.newTodoTitle.trim()),l(4),c("ngForOf",n.filters),l(2),c("ngForOf",n.filteredTodos())("ngForTrackBy",n.trackTodo),l(),c("ngIf",n.filteredTodos().length===0),l(4),c("disabled",n.completedCount()===0),l(14),s(" ",n.todos().length),l(4),s(" ",n.activeCount()),l(4),s(" ",n.completedCount()),l(4),s(" ",n.filter()),l(4),s(" ",n.filteredTodos().length," "),l(5),_(n.stateJson()),l(9),s(" ",n.lastOperation," "),l(4),s(" ",n.operationCount," "))},dependencies:[A,O,I,L,V,P,B,N],styles:[".filter-btn-active[_ngcontent-%COMP%]{@apply bg-blue-500 text-white;}.filter-btn-inactive[_ngcontent-%COMP%]{@apply bg-gray-200 text-gray-700 hover:bg-gray-300;}"]})};export{W as CoreDemoComponent};
