import{a as F}from"./chunk-7MB6DANI.js";import{b as I,c as z,d as H,k as N}from"./chunk-QQ3EH6F6.js";import{e as $}from"./chunk-75A3EJSS.js";import{$b as _,Ab as l,Cb as u,Jb as y,Lb as n,Mb as b,Na as m,Nb as v,Ob as w,Pb as k,Qb as E,Rb as D,Xa as S,a as s,b as d,jb as P,nb as O,oa as h,pa as f,pb as C,qb as x,rb as g,sb as o,tb as t,vc as A,yb as M,za as T}from"./chunk-IT4IGUIF.js";var U=(p,e)=>e.id;function L(p,e){if(p&1){let r=M();o(0,"div",30)(1,"input",31),l("change",function(){let a=h(r).$implicit,c=u();return f(c.toggleTodo(a.id))}),t(),o(2,"span"),n(3),t(),o(4,"button",32),l("click",function(){let a=h(r).$implicit,c=u();return f(c.deleteTodo(a.id))}),n(5,"X"),t()()}if(p&2){let r=e.$implicit;y("completed",r.completed),m(),g("checked",r.completed),m(2),b(r.title)}}function B(p,e){if(p&1){let r=M();o(0,"div",33),l("click",function(){let a=h(r).$index,c=u();return f(c.goToState(a))})("keyup",function(a){let c=h(r).$index,V=u();return f(V.onHistoryItemKeyup(a,c))}),o(1,"div",34),n(2),t(),o(3,"div",35)(4,"div",36),n(5),t(),o(6,"div",37),n(7),t()()()}if(p&2){let r=e.$implicit,i=e.$index,a=u();y("active",i===a.currentIndex()),P("aria-pressed",i===a.currentIndex()),m(2),b(i+1),m(3),v(" ",a.formatTimestamp(r.timestamp)," "),m(2),v(" ",a.getStatePreview(r.state)," ")}}var R=class p{newTodoText="";tree=$({counter:0,message:"Hello SignalTree!",todos:[{id:1,title:"Learn SignalTree",completed:!0},{id:2,title:"Try Time Travel",completed:!1},{id:3,title:"Build Something Amazing",completed:!1}]}).with(F({maxHistorySize:50}));updateTree=this.tree;counter=this.tree.state.counter;message=this.tree.state.message;todos=this.tree.state.todos;timeTravel=this.tree.__timeTravel;history=T(this.timeTravel.getHistory());currentIndex=T(this.timeTravel.getCurrentIndex());canUndo=T(this.timeTravel.canUndo());canRedo=T(this.timeTravel.canRedo());refreshTimeTravelState(){this.history.set(this.timeTravel.getHistory()),this.refreshTimeTravelState(),this.canUndo.set(this.timeTravel.canUndo()),this.canRedo.set(this.timeTravel.canRedo())}activeTodos=_(()=>this.todos().filter(e=>!e.completed));completedTodos=_(()=>this.todos().filter(e=>e.completed));historyLength=_(()=>this.history().length);currentState=_(()=>this.history()[this.currentIndex()]);increment(){this.updateTree(e=>d(s({},e),{counter:e.counter+1})),this.refreshTimeTravelState()}decrement(){this.updateTree(e=>d(s({},e),{counter:e.counter-1})),this.refreshTimeTravelState()}reset(){this.updateTree(e=>d(s({},e),{counter:0})),this.refreshTimeTravelState()}updateMessage(e){this.updateTree(r=>d(s({},r),{message:e})),this.refreshTimeTravelState()}addTodo(){let e=this.newTodoText.trim();if(!e)return;let r={id:Date.now(),title:e,completed:!1};this.updateTree(i=>d(s({},i),{todos:[...i.todos,r]})),this.newTodoText="",this.refreshTimeTravelState()}toggleTodo(e){this.updateTree(r=>d(s({},r),{todos:r.todos.map(i=>i.id===e?d(s({},i),{completed:!i.completed}):i)})),this.refreshTimeTravelState()}deleteTodo(e){this.updateTree(r=>d(s({},r),{todos:r.todos.filter(i=>i.id!==e)})),this.refreshTimeTravelState()}undo(){this.timeTravel.undo(),this.refreshTimeTravelState()}redo(){this.timeTravel.redo(),this.refreshTimeTravelState()}goToState(e){this.timeTravel.jumpTo(e),this.refreshTimeTravelState()}onHistoryItemKeyup(e,r){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.goToState(r))}clearHistory(){this.timeTravel.resetHistory(),this.refreshTimeTravelState()}generateSampleActions(){this.timeTravel.resetHistory(),setTimeout(()=>{this.updateTree(e=>d(s({},e),{message:"Starting demo..."})),this.refreshTimeTravelState()},100),setTimeout(()=>{this.updateTree(e=>d(s({},e),{counter:1})),this.refreshTimeTravelState()},200),setTimeout(()=>{this.updateTree(e=>d(s({},e),{todos:[{id:Date.now(),title:"First task",completed:!1}]})),this.refreshTimeTravelState()},300),setTimeout(()=>{this.updateTree(e=>d(s({},e),{counter:5})),this.refreshTimeTravelState()},400),setTimeout(()=>{this.updateTree(e=>d(s({},e),{message:"Making more changes..."})),this.refreshTimeTravelState()},500),setTimeout(()=>{this.updateTree(e=>d(s({},e),{todos:[...e.todos,{id:Date.now()+1,title:"Second task",completed:!1}]})),this.refreshTimeTravelState()},600),setTimeout(()=>{this.updateTree(e=>d(s({},e),{counter:10})),this.refreshTimeTravelState()},700),setTimeout(()=>{this.updateTree(e=>d(s({},e),{todos:e.todos.map((r,i)=>i===0?d(s({},r),{completed:!0}):r)})),this.refreshTimeTravelState()},800),setTimeout(()=>{this.updateTree(e=>d(s({},e),{message:"Demo complete! Try undo/redo now."})),this.refreshTimeTravelState()},900),setTimeout(()=>{this.updateTree(e=>d(s({},e),{counter:15})),this.refreshTimeTravelState()},1e3)}formatTimestamp(e){return new Date(e).toLocaleTimeString()}getStatePreview(e){return`Counter: ${e.counter}, Todos: ${e.todos.length}, Message: "${e.message.substring(0,20)}..."`}static \u0275fac=function(r){return new(r||p)};static \u0275cmp=S({type:p,selectors:[["app-time-travel-demo"]],decls:99,vars:9,consts:[[1,"container"],[1,"explanation-card"],[1,"intro-text"],[1,"how-it-works"],[1,"instruction-list"],[1,"demo-grid"],[1,"card","actions-card"],[1,"card-description"],[1,"control-section"],[2,"font-size","0.875rem","color","#6b7280","margin","0.5rem 0"],[1,"button-group"],[1,"btn-primary","btn-sm",3,"click"],[1,"btn-danger","btn-sm",3,"click"],[1,"btn-secondary","btn-sm",3,"click"],["type","text",1,"form-input",3,"input","value"],[1,"input-group"],["type","text","placeholder","Add a todo...",1,"form-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn-primary","btn-sm",3,"click","disabled"],[1,"todos-list"],[1,"todo-item",3,"completed"],[1,"card","time-travel-card"],[1,"tt-controls"],[1,"btn-warning",3,"click","disabled"],[1,"btn-success",3,"click","disabled"],[1,"history-info"],[1,"info-item"],[1,"label"],[1,"value"],[1,"history-list"],["tabindex","0","role","button",1,"history-item",3,"active"],[1,"todo-item"],["type","checkbox",3,"change","checked"],[1,"btn-delete",3,"click"],["tabindex","0","role","button",1,"history-item",3,"click","keyup"],[1,"history-index"],[1,"history-content"],[1,"history-time"],[1,"history-preview"]],template:function(r,i){r&1&&(o(0,"div",0)(1,"h1"),n(2,"Time Travel Demo"),t(),o(3,"div",1)(4,"h2"),n(5,"What is Time Travel?"),t(),o(6,"p",2)(7,"strong"),n(8,"Time Travel"),t(),n(9," allows you to "),o(10,"em"),n(11,"undo and redo state changes"),t(),n(12,", navigate through your application's history, and replay user actions. Perfect for debugging, testing, and providing undo/redo functionality. "),t(),o(13,"div",3)(14,"h3"),n(15,"How It Works"),t(),o(16,"ol",4)(17,"li")(18,"strong"),n(19,"Automatic Tracking:"),t(),n(20," Every state change is recorded in history "),t(),o(21,"li")(22,"strong"),n(23,"Navigate History:"),t(),n(24," Move backward and forward through state snapshots "),t(),o(25,"li")(26,"strong"),n(27,"Jump to State:"),t(),n(28," Click any history item to instantly restore that state "),t(),o(29,"li")(30,"strong"),n(31,"Undo/Redo:"),t(),n(32," Built-in undo and redo functionality "),t(),o(33,"li")(34,"strong"),n(35,"Quick Test:"),t(),n(36,' Click "Generate Sample Actions" to see time travel in action instantly! '),t()()()(),o(37,"div",5)(38,"div",6)(39,"h2"),n(40,"Make State Changes"),t(),o(41,"p",7),n(42,' Each action below creates a new entry in history. Click "Generate Sample Actions" to quickly populate history, then use Undo/Redo to navigate! '),t(),o(43,"div",8)(44,"h3"),n(45),t(),o(46,"p",9),n(47," Increment or decrement to add history entries "),t(),o(48,"div",10)(49,"button",11),l("click",function(){return i.increment()}),n(50," +1 Increment "),t(),o(51,"button",12),l("click",function(){return i.decrement()}),n(52," -1 Decrement "),t(),o(53,"button",13),l("click",function(){return i.reset()}),n(54," Reset to 0 "),t()()(),o(55,"div",8)(56,"h3"),n(57,"Message"),t(),o(58,"input",14),l("input",function(c){return i.updateMessage(c.target.value)}),t()(),o(59,"div",8)(60,"h3"),n(61,"Todos"),t(),o(62,"div",15)(63,"input",16),D("ngModelChange",function(c){return E(i.newTodoText,c)||(i.newTodoText=c),c}),l("keyup.enter",function(){return i.addTodo()}),t(),o(64,"button",17),l("click",function(){return i.addTodo()}),n(65," Add "),t()(),o(66,"div",18),C(67,L,6,4,"div",19,U),t()()(),o(69,"div",20)(70,"h2"),n(71,"Time Travel Controls"),t(),o(72,"p",7),n(73,"Navigate through state history"),t(),o(74,"div",21)(75,"button",22),l("click",function(){return i.undo()}),n(76," Undo "),t(),o(77,"button",23),l("click",function(){return i.redo()}),n(78," Redo "),t(),o(79,"button",11),l("click",function(){return i.generateSampleActions()}),n(80," \u{1F3AC} Generate Sample Actions "),t(),o(81,"button",12),l("click",function(){return i.clearHistory()}),n(82," Clear History "),t()(),o(83,"div",24)(84,"div",25)(85,"span",26),n(86,"History Length:"),t(),o(87,"span",27),n(88),t()(),o(89,"div",25)(90,"span",26),n(91,"Current Position:"),t(),o(92,"span",27),n(93),t()()(),o(94,"div",28)(95,"h3"),n(96,"State History"),t(),C(97,B,8,6,"div",29,O),t()()()()),r&2&&(m(45),v("Counter: ",i.counter()),m(13),g("value",i.message()),m(5),k("ngModel",i.newTodoText),m(),g("disabled",!i.newTodoText.trim()),m(3),x(i.todos()),m(8),g("disabled",!i.canUndo()),m(2),g("disabled",!i.canRedo()),m(11),b(i.historyLength()),m(5),w("",i.currentIndex()+1," / ",i.historyLength()),m(4),x(i.history()))},dependencies:[A,N,I,z,H],styles:[".container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:2rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1f2937;margin-bottom:1.5rem;text-align:center}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1f2937;margin-bottom:.75rem}.explanation-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 4px #00000014;padding:1.5rem;margin-bottom:2rem;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-left:4px solid #3b82f6}.explanation-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#3b82f6;margin-bottom:1rem}.explanation-card[_ngcontent-%COMP%]   .intro-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.7;color:#374151;margin-bottom:1.5rem}.explanation-card[_ngcontent-%COMP%]   .intro-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#3b82f6;font-weight:600}.explanation-card[_ngcontent-%COMP%]   .intro-text[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic;color:#8b5cf6}.explanation-card[_ngcontent-%COMP%]   .how-it-works[_ngcontent-%COMP%]{background:#fff;padding:1.25rem;border-radius:8px;border:1px solid #e5e7eb}.explanation-card[_ngcontent-%COMP%]   .instruction-list[_ngcontent-%COMP%]{margin:0;padding-left:1.5rem}.explanation-card[_ngcontent-%COMP%]   .instruction-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.9375rem;line-height:1.7;color:#374151;margin-bottom:.75rem}.explanation-card[_ngcontent-%COMP%]   .instruction-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.explanation-card[_ngcontent-%COMP%]   .instruction-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1f2937;font-weight:600}.card-description[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin-bottom:1.5rem;margin-top:-.25rem}.demo-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}@media (max-width: 1024px){.demo-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 4px #00000014;padding:1.5rem}.actions-card[_ngcontent-%COMP%]{border-top:4px solid #10b981}.time-travel-card[_ngcontent-%COMP%]{border-top:4px solid #f59e0b}.control-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid #e5e7eb}.control-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.counter-display[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#3b82f6;text-align:center;margin:1rem 0}.button-group[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.form-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e5e7eb;border-radius:6px;font-size:.875rem}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.input-group[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-bottom:1rem}.todos-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.todo-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem;background:#f9fafb;border-radius:4px;margin-bottom:.5rem}.todo-item.completed[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:line-through;color:#6b7280}.todo-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:1rem;height:1rem;cursor:pointer}.todo-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:.875rem}.btn-delete[_ngcontent-%COMP%]{background:transparent;color:#ef4444;border:1px solid #ef4444;padding:.25rem .5rem;border-radius:4px;font-size:.75rem;cursor:pointer;transition:all .2s}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%], .btn-warning[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:.625rem 1.25rem;border-radius:6px;font-weight:600;border:none;cursor:pointer;font-size:.875rem;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled), .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled), .btn-success[_ngcontent-%COMP%]:hover:not(:disabled), .btn-warning[_ngcontent-%COMP%]:hover:not(:disabled), .btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 8px #00000026}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-secondary[_ngcontent-%COMP%]:disabled, .btn-success[_ngcontent-%COMP%]:disabled, .btn-warning[_ngcontent-%COMP%]:disabled, .btn-danger[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn-warning[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:.375rem .875rem;font-size:.8125rem}.tt-controls[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-bottom:1.5rem}.history-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem;padding:1rem;background:#f9fafb;border-radius:8px}.history-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.history-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#6b7280;margin-bottom:.25rem}.history-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937}.history-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.history-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem}.history-item[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:.75rem;background:#f9fafb;border-radius:6px;margin-bottom:.5rem;border:2px solid transparent;cursor:pointer;transition:all .2s}.history-item[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:#fff}.history-item.active[_ngcontent-%COMP%]{border-color:#f59e0b;background:linear-gradient(135deg,#fef3c7,#fde68a)}.history-index[_ngcontent-%COMP%]{width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;background:#3b82f6;color:#fff;border-radius:50%;font-weight:700;font-size:.875rem;flex-shrink:0}.history-content[_ngcontent-%COMP%]{flex:1;min-width:0}.history-time[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;margin-bottom:.25rem}.history-preview[_ngcontent-%COMP%]{font-size:.8125rem;color:#374151;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};export{R as TimeTravelDemoComponent};
