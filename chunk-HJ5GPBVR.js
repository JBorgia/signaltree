import{da as o,j as n}from"./chunk-6DDIHEJP.js";var a=class t{API_URL="https://signaltree-7i4pozzuz-jonathan-d-borgias-projects.vercel.app/api/benchmark";CONSENT_KEY="signaltree_benchmark_consent";SESSION_KEY="signaltree_session_id";constructor(){localStorage.getItem(this.SESSION_KEY)||localStorage.setItem(this.SESSION_KEY,this.generateSessionId())}generateSessionId(){return`${Date.now()}-${Math.random().toString(36).substring(2,15)}`}hasConsent(){return localStorage.getItem(this.CONSENT_KEY)==="true"}giveConsent(){localStorage.setItem(this.CONSENT_KEY,"true")}revokeConsent(){localStorage.removeItem(this.CONSENT_KEY)}getMachineInfo(){let e=navigator;return{browser:this.getBrowserInfo(),os:navigator.platform,cpuCores:navigator.hardwareConcurrency||0,memory:e.deviceMemory?`${e.deviceMemory}GB`:"unknown",screenResolution:`${screen.width}x${screen.height}`,devicePixelRatio:window.devicePixelRatio||1,userAgent:navigator.userAgent}}getBrowserInfo(){let e=navigator.userAgent,r="Unknown";return e.includes("Firefox/")?r=e.match(/Firefox\/([\d.]+)/)?.[0]||"Firefox":e.includes("Edg/")?r=e.match(/Edg\/([\d.]+)/)?.[0]?.replace("Edg","Edge")||"Edge":e.includes("Chrome/")?r=e.match(/Chrome\/([\d.]+)/)?.[0]||"Chrome":e.includes("Safari/")&&(r=e.match(/Version\/([\d.]+)/)?.[0]?.replace("Version","Safari")||"Safari"),r}submitBenchmark(e,r){return n(this,null,function*(){if(!this.hasConsent())return console.log("Benchmark submission skipped: no consent"),!1;let i={timestamp:new Date().toISOString(),depth:e,sessionId:localStorage.getItem(this.SESSION_KEY)||"",consentGiven:!0,machineInfo:this.getMachineInfo(),results:r,version:"3.0.1"};try{return(yield(yield fetch(this.API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json()).success}catch(s){return console.error("Failed to submit benchmark:",s),!1}})}getBenchmarkHistory(){return n(this,null,function*(){try{let r=yield(yield fetch(this.API_URL)).json();return r.success?r.benchmarks:[]}catch(e){return console.error("Failed to fetch benchmark history:",e),[]}})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=o({token:t,factory:t.\u0275fac,providedIn:"root"})};export{a};
