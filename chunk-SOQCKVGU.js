import{a as O}from"./chunk-AHY4B26Q.js";import{b as F,c as B,d as W,k as j}from"./chunk-QAZQSZCQ.js";import{e as N}from"./chunk-QBPEN4DG.js";import{$a as b,Hb as f,Ib as o,Jb as v,Kb as x,Lb as S,Mb as E,Na as m,Nb as w,Ob as h,Pb as C,Tb as D,Vb as M,Xa as k,a as g,b as _,oa as c,oc as I,pa as u,pb as T,qb as n,rb as t,sc as V,vb as y,vc as H,xb as a,zb as p}from"./chunk-STRTG7VY.js";function A(s,l){if(s&1){let i=y();n(0,"button",28),a("click",function(){let r=c(i).index,d=p();return u(d.jumpTo(r))})("keydown.enter",function(){let r=c(i).index,d=p();return u(d.jumpTo(r))})("keydown.space",function(){let r=c(i).index,d=p();return u(d.jumpTo(r))}),o(1),D(2,"date"),t()}if(s&2){let i=l.$implicit,e=l.index,r=p();f(r.getHistoryItemClass(e)),m(),E(" ",e,": ",i.action||"Initial"," (",M(2,5,i.timestamp,"medium"),") ")}}function P(s,l){if(s&1){let i=y();n(0,"li",18)(1,"button",29),a("click",function(){let r=c(i).$implicit,d=p();return u(d.toggleTodo(r.id))})("keydown.enter",function(){let r=c(i).$implicit,d=p();return u(d.toggleTodo(r.id))})("keydown.space",function(){let r=c(i).$implicit,d=p();return u(d.toggleTodo(r.id))}),o(2),t()()}if(s&2){let i=l.$implicit;f(i.completed?"line-through text-gray-500":""),m(2),S(" ",i.completed?"\u2713":"\u25CB"," ",i.text," ")}}var R=class s{newTodoText="";store=N({counter:0,todos:[],message:""}).with(O({}));counter=this.store.state.counter;todos=this.store.state.todos;message=this.store.state.message;increment(){this.store(l=>_(g({},l),{counter:l.counter+1}))}decrement(){this.store(l=>_(g({},l),{counter:l.counter-1}))}addTodo(){if(this.newTodoText.trim()){let l={id:Date.now(),text:this.newTodoText.trim(),completed:!1};this.store(i=>_(g({},i),{todos:[...i.todos,l]})),this.newTodoText=""}}toggleTodo(l){this.store(i=>_(g({},i),{todos:i.todos.map(e=>e.id===l?_(g({},e),{completed:!e.completed}):e)}))}undo(){return this.store.undo(),!0}redo(){return this.store.redo(),!0}canUndo(){return this.store.canUndo?.()||!1}canRedo(){return this.store.canRedo?.()||!1}resetHistory(){this.store.resetHistory()}getCurrentIndex(){return this.store.getCurrentIndex?.()||0}getHistory(){return this.store.getHistory()}jumpTo(l){this.store.jumpTo?.(l)}getHistoryItemClass(l){let i=this.getCurrentIndex();return l===i?"bg-blue-100 border border-blue-300":"bg-gray-100 hover:bg-gray-200"}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=k({type:s,selectors:[["app-time-travel-demo"]],decls:71,vars:13,consts:[[1,"container","mx-auto","p-6"],[1,"text-3xl","font-bold","mb-6"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4"],["for","counter",1,"block","text-sm","font-medium","mb-2"],[1,"flex","gap-2"],[1,"px-4","py-2","bg-blue-500","text-white","rounded-md","hover:bg-blue-600",3,"click"],[1,"px-4","py-2","bg-red-500","text-white","rounded-md","hover:bg-red-600",3,"click"],["for","message",1,"block","text-sm","font-medium","mb-2"],["id","message","type","text",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],["for","newTodo",1,"block","text-sm","font-medium","mb-2"],["id","newTodo","type","text","placeholder","Enter todo...",1,"flex-1","px-3","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],[1,"px-4","py-2","bg-green-500","text-white","rounded-md","hover:bg-green-600","disabled:opacity-50",3,"click","disabled"],[1,"flex-1","px-4","py-2","bg-yellow-500","text-white","rounded-md","hover:bg-yellow-600","disabled:opacity-50",3,"click","disabled"],[1,"flex-1","px-4","py-2","bg-purple-500","text-white","rounded-md","hover:bg-purple-600","disabled:opacity-50",3,"click","disabled"],[1,"w-full","px-4","py-2","bg-red-500","text-white","rounded-md","hover:bg-red-600",3,"click"],[1,"text-sm"],[1,"max-h-48","overflow-y-auto"],[1,"font-medium","mb-2"],[1,"space-y-1"],["class","w-full text-left px-2 py-1 text-xs rounded","type","button",3,"class","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],[1,"mt-8","bg-white","rounded-lg","shadow","p-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-lg"],["class","text-sm",3,"class",4,"ngFor","ngForOf"],["type","button",1,"w-full","text-left","px-2","py-1","text-xs","rounded",3,"click","keydown.enter","keydown.space"],["type","button",1,"cursor-pointer","text-left","w-full","bg-transparent","border-0","p-0",3,"click","keydown.enter","keydown.space"]],template:function(i,e){i&1&&(n(0,"div",0)(1,"h1",1),o(2,"SignalTree Time Travel Demo"),t(),n(3,"div",2)(4,"div",3)(5,"h2",4),o(6,"State Controls"),t(),n(7,"div",5)(8,"div")(9,"label",6),o(10),t(),n(11,"div",7)(12,"button",8),a("click",function(){return e.increment()}),o(13," +1 "),t(),n(14,"button",9),a("click",function(){return e.decrement()}),o(15," -1 "),t()()(),n(16,"div")(17,"label",10),o(18,"Message:"),t(),n(19,"input",11),C("ngModelChange",function(d){return h(e.message,d)||(e.message=d),d}),t()(),n(20,"div")(21,"label",12),o(22,"Add Todo:"),t(),n(23,"div",7)(24,"input",13),C("ngModelChange",function(d){return h(e.newTodoText,d)||(e.newTodoText=d),d}),t(),n(25,"button",14),a("click",function(){return e.addTodo()}),o(26," Add "),t()()()()(),n(27,"div",3)(28,"h2",4),o(29,"Time Travel"),t(),n(30,"div",5)(31,"div",7)(32,"button",15),a("click",function(){return e.undo()}),o(33," \u21B6 Undo "),t(),n(34,"button",16),a("click",function(){return e.redo()}),o(35," \u21B7 Redo "),t()(),n(36,"button",17),a("click",function(){return e.resetHistory()}),o(37," Reset History "),t(),n(38,"div",18)(39,"p")(40,"strong"),o(41,"Current Index:"),t(),o(42),t(),n(43,"p")(44,"strong"),o(45,"History Length:"),t(),o(46),t()(),n(47,"div",19)(48,"h3",20),o(49,"History:"),t(),n(50,"div",21),b(51,A,3,8,"button",22),t()()()()(),n(52,"div",23)(53,"h2",4),o(54,"Current State"),t(),n(55,"div",24)(56,"div")(57,"h3",20),o(58,"Counter:"),t(),n(59,"p",25),o(60),t()(),n(61,"div")(62,"h3",20),o(63,"Message:"),t(),n(64,"p",26),o(65),t()(),n(66,"div")(67,"h3",20),o(68),t(),n(69,"ul",21),b(70,P,3,4,"li",27),t()()()()()),i&2&&(m(10),x("Counter: ",e.counter()),m(9),w("ngModel",e.message),m(5),w("ngModel",e.newTodoText),m(),T("disabled",!e.newTodoText.trim()),m(7),T("disabled",!e.canUndo()),m(2),T("disabled",!e.canRedo()),m(8),x(" ",e.getCurrentIndex()),m(4),x(" ",e.getHistory().length),m(5),T("ngForOf",e.getHistory()),m(9),v(e.counter()),m(5),v(e.message()||"(empty)"),m(3),x("Todos (",e.todos().length,"):"),m(2),T("ngForOf",e.todos()))},dependencies:[H,I,j,F,B,W,V],encapsulation:2})};export{R as TimeTravelDemoComponent};
