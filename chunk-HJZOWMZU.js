import{da as m,j as o}from"./chunk-IT4IGUIF.js";var l=class c{API_URL="https://signaltree.vercel.app/api/realistic-benchmark";CONSENT_KEY="signaltree_benchmark_consent";SESSION_KEY="signaltree_session_id";constructor(){localStorage.getItem(this.SESSION_KEY)||localStorage.setItem(this.SESSION_KEY,this.generateSessionId())}generateSessionId(){return`${Date.now()}-${Math.random().toString(36).substring(2,15)}`}getSessionId(){return localStorage.getItem(this.SESSION_KEY)||this.generateSessionId()}hasConsent(){return localStorage.getItem(this.CONSENT_KEY)==="true"}giveConsent(){localStorage.setItem(this.CONSENT_KEY,"true")}revokeConsent(){localStorage.removeItem(this.CONSENT_KEY)}getMachineInfo(){let e=navigator,r={browser:this.getBrowserName(),browserVersion:this.getBrowserVersion(),userAgent:navigator.userAgent,os:this.getOS(),cpuCores:navigator.hardwareConcurrency||0,cpuArchitecture:this.getCPUArchitecture(),memory:e.deviceMemory?`${e.deviceMemory}GB`:"unknown",deviceMemory:e.deviceMemory,screenResolution:`${screen.width}x${screen.height}`,devicePixelRatio:window.devicePixelRatio||1,colorDepth:screen.colorDepth||24,hardwareConcurrency:navigator.hardwareConcurrency||0,maxTouchPoints:navigator.maxTouchPoints||0};return e.connection&&(r.connection={effectiveType:e.connection.effectiveType,downlink:e.connection.downlink,rtt:e.connection.rtt}),r}getBatteryInfo(){return o(this,null,function*(){try{let e=navigator;if(e.getBattery){let r=yield e.getBattery();return{charging:r.charging,level:r.level}}}catch(e){console.debug("Battery API not available:",e)}})}getBrowserName(){let e=navigator.userAgent;return e.includes("Firefox/")?"Firefox":e.includes("Edg/")?"Edge":e.includes("Chrome/")?"Chrome":e.includes("Safari/")&&!e.includes("Chrome")?"Safari":"Unknown"}getBrowserVersion(){let e=navigator.userAgent,r;return e.includes("Firefox/")?r=e.match(/Firefox\/([\d.]+)/):e.includes("Edg/")?r=e.match(/Edg\/([\d.]+)/):e.includes("Chrome/")?r=e.match(/Chrome\/([\d.]+)/):e.includes("Safari/")&&(r=e.match(/Version\/([\d.]+)/)),r?r[1]:"Unknown"}getOS(){let e=navigator.userAgent;return e.includes("Win")?"Windows":e.includes("Mac")?"macOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")?"iOS":navigator.platform}getCPUArchitecture(){let e=navigator.userAgent.toLowerCase();if(e.includes("arm64")||e.includes("aarch64"))return"arm64";if(e.includes("x86_64")||e.includes("x64"))return"x86_64";if(e.includes("x86")||e.includes("i686"))return"x86"}deriveMachineType(e){let{os:r,cpuCores:n,deviceMemory:i}=e,s=i||parseInt(e.memory)||0;return r==="iOS"||r==="Android"?"Mobile":n>=8&&s>=16?"High-End Desktop":n>=4&&s>=8?"Mid-Range Desktop":"Budget/Laptop"}submitBenchmark(e){return o(this,null,function*(){if(!this.API_URL)return console.log("Benchmark submission skipped: API disabled"),{success:!1,error:"API not configured"};if(!this.hasConsent())return console.log("Benchmark submission skipped: no consent"),{success:!1,error:"No consent given"};try{let r=yield fetch(this.API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=yield r.json();return r.ok?{success:!0,id:n.id}:(console.error("Failed to submit benchmark:",n),{success:!1,error:n.error||"Unknown error"})}catch(r){return console.error("Failed to submit benchmark:",r),{success:!1,error:String(r)}}})}getBenchmarkHistory(e){return o(this,null,function*(){if(!this.API_URL)return{success:!0,benchmarks:[]};try{let r=e?"?"+Object.entries(e).filter(([,s])=>s!==void 0).map(([s,a])=>`${s}=${encodeURIComponent(String(a))}`).join("&"):"",n=yield fetch(`${this.API_URL}${r}`);if(!n.ok)throw new Error(`HTTP ${n.status}`);return{success:!0,benchmarks:(yield n.json()).benchmarks||[]}}catch(r){return console.error("Failed to fetch benchmark history:",r),{success:!1,benchmarks:[]}}})}getBenchmarkDetails(e){return o(this,null,function*(){if(!this.API_URL)return{success:!1};try{let r=yield fetch(`${this.API_URL}/${e}`);if(!r.ok)throw new Error(`HTTP ${r.status}`);return{success:!0,data:(yield r.json()).benchmark}}catch(r){return console.error("Failed to fetch benchmark details:",r),{success:!1}}})}exportAsJSON(e){let r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`signaltree-benchmark-${e.id}.json`,i.click(),URL.revokeObjectURL(n)}exportAsCSV(e){let r=["ID","Date","Winner","Score","Reliability","Machine Type","Tests","Duration (s)"],n=e.map(t=>[t.id,new Date(t.timestamp).toLocaleString(),t.summary.winnerLibrary,t.summary.winnerScore.toFixed(1),t.summary.reliabilityScore,t.summary.machineType,t.summary.totalTests,t.summary.duration.toFixed(1)]),i=[r,...n].map(t=>t.join(",")).join(`
`),s=new Blob([i],{type:"text/csv"}),a=URL.createObjectURL(s),u=document.createElement("a");u.href=a,u.download=`signaltree-benchmarks-${Date.now()}.csv`,u.click(),URL.revokeObjectURL(a)}static \u0275fac=function(r){return new(r||c)};static \u0275prov=m({token:c,factory:c.\u0275fac,providedIn:"root"})};export{l as a};
