import{X as d}from"./chunk-MVZBW2TQ.js";import{j as m}from"./chunk-A3ECCK3J.js";var a={id:"sample-benchmark-001",timestamp:new Date("2024-08-15T14:32:05.000Z").toISOString(),version:"4.0.9",sessionId:"sample-session",consentGiven:!0,calibration:{reliabilityScore:86,mathOpsPerMs:1240,memoryOpsPerMs:980,environmentFactors:[{name:"Thermals",impact:-4,reason:"Laptop running on battery"},{name:"CPU governor",impact:2,reason:"Performance mode enabled"}],throttlingDetected:!1,backgroundLoad:12,timestamp:new Date("2024-08-15T14:30:00.000Z").toISOString()},machineInfo:{browser:"Chrome",browserVersion:"127.0.0",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 14_4_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0 Safari/537.36",os:"macOS",cpuCores:8,cpuArchitecture:"arm64",memory:"16",deviceMemory:16,screenResolution:"2560x1600",devicePixelRatio:2,colorDepth:24,hardwareConcurrency:8,maxTouchPoints:0},config:{dataSize:7500,iterations:60,samplesPerTest:25,selectedLibraries:["signaltree","ngrx-store","ngrx-signals"],selectedScenarios:["selectors-heavy","forms-deep","async-pipeline"],weightingPreset:"mid-range-desktop"},results:{libraries:{signaltree:{name:"SignalTree",enabled:!0,scenarios:{"selectors-heavy":{scenarioId:"selectors-heavy",scenarioName:"Selectors Heavy",samples:[1.9,2.1,1.8,2],median:1.95,mean:1.97,min:1.8,max:2.1,p95:2.08,p99:2.12,stdDev:.11,opsPerSec:512,relativeToBaseline:1,rank:1},"forms-deep":{scenarioId:"forms-deep",scenarioName:"Forms Deep",samples:[3.1,3.4,3,3.2],median:3.2,mean:3.18,min:3,max:3.4,p95:3.35,p99:3.4,stdDev:.14,opsPerSec:321,relativeToBaseline:1,rank:1},"async-pipeline":{scenarioId:"async-pipeline",scenarioName:"Async Pipeline",samples:[2.4,2.7,2.5,2.6],median:2.55,mean:2.55,min:2.4,max:2.7,p95:2.68,p99:2.7,stdDev:.11,opsPerSec:410,relativeToBaseline:1,rank:1}}},"ngrx-store":{name:"NgRx Store",enabled:!0,scenarios:{"selectors-heavy":{scenarioId:"selectors-heavy",scenarioName:"Selectors Heavy",samples:[4.7,4.9,5.1,4.8],median:4.85,mean:4.88,min:4.7,max:5.1,p95:5.05,p99:5.1,stdDev:.16,opsPerSec:205,relativeToBaseline:2.48,rank:2}}},"ngrx-signals":{name:"NgRx Signals",enabled:!0,scenarios:{"selectors-heavy":{scenarioId:"selectors-heavy",scenarioName:"Selectors Heavy",samples:[3.8,4,4.1,3.9],median:3.95,mean:3.95,min:3.8,max:4.1,p95:4.08,p99:4.1,stdDev:.1,opsPerSec:253,relativeToBaseline:2,rank:2}}}}},weightedResults:{libraries:{signaltree:{rawScore:98.4,weightedScore:96.4,rank:1,scenarioBreakdown:[{scenarioName:"Selectors Heavy",weight:2.8,rawScore:38,weightedContribution:35.4},{scenarioName:"Forms Deep",weight:2.5,rawScore:33,weightedContribution:31.2},{scenarioName:"Async Pipeline",weight:2.1,rawScore:27,weightedContribution:25.8}]},"ngrx-store":{rawScore:72.1,weightedScore:70.3,rank:2,scenarioBreakdown:[]},"ngrx-signals":{rawScore:68.4,weightedScore:67.2,rank:3,scenarioBreakdown:[]}},totalScenariosRun:12,totalTestsExecuted:48,totalDuration:138},weights:{"selectors-heavy":2.8,"forms-deep":2.5,"async-pipeline":2.1}},u=[{id:a.id,createdAt:a.timestamp,timestamp:a.timestamp,version:a.version,summary:{winnerLibrary:"signaltree",winnerScore:96.4,reliabilityScore:86,machineType:"Mid-Range Desktop",totalTests:a.weightedResults.totalTestsExecuted,duration:a.weightedResults.totalDuration},fullData:a}],g=class l{API_URL="https://signaltree.vercel.app/api/realistic-benchmark";CONSENT_KEY="signaltree_benchmark_consent";SESSION_KEY="signaltree_session_id";constructor(){localStorage.getItem(this.SESSION_KEY)||localStorage.setItem(this.SESSION_KEY,this.generateSessionId())}generateSessionId(){return`${Date.now()}-${Math.random().toString(36).substring(2,15)}`}getSessionId(){return localStorage.getItem(this.SESSION_KEY)||this.generateSessionId()}hasConsent(){return!0}giveConsent(){}revokeConsent(){}getMachineInfo(){let e=navigator,r={browser:this.getBrowserName(),browserVersion:this.getBrowserVersion(),userAgent:navigator.userAgent,os:this.getOS(),cpuCores:navigator.hardwareConcurrency||0,cpuArchitecture:this.getCPUArchitecture(),memory:e.deviceMemory?`${e.deviceMemory}GB`:"unknown",deviceMemory:e.deviceMemory,screenResolution:`${screen.width}x${screen.height}`,devicePixelRatio:window.devicePixelRatio||1,colorDepth:screen.colorDepth||24,hardwareConcurrency:navigator.hardwareConcurrency||0,maxTouchPoints:navigator.maxTouchPoints||0};return e.connection&&(r.connection={effectiveType:e.connection.effectiveType,downlink:e.connection.downlink,rtt:e.connection.rtt}),r}getBatteryInfo(){return m(this,null,function*(){try{let e=navigator;if(e.getBattery){let r=yield e.getBattery();return{charging:r.charging,level:r.level}}}catch{}})}getBrowserName(){let e=navigator.userAgent;return e.includes("Firefox/")?"Firefox":e.includes("Edg/")?"Edge":e.includes("Chrome/")?"Chrome":e.includes("Safari/")&&!e.includes("Chrome")?"Safari":"Unknown"}getBrowserVersion(){let e=navigator.userAgent,r;return e.includes("Firefox/")?r=e.match(/Firefox\/([\d.]+)/):e.includes("Edg/")?r=e.match(/Edg\/([\d.]+)/):e.includes("Chrome/")?r=e.match(/Chrome\/([\d.]+)/):e.includes("Safari/")&&(r=e.match(/Version\/([\d.]+)/)),r?r[1]:"Unknown"}getOS(){let e=navigator.userAgent;return e.includes("Win")?"Windows":e.includes("Mac")?"macOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")?"iOS":navigator.platform}getCPUArchitecture(){let e=navigator.userAgent.toLowerCase();if(e.includes("arm64")||e.includes("aarch64"))return"arm64";if(e.includes("x86_64")||e.includes("x64"))return"x86_64";if(e.includes("x86")||e.includes("i686"))return"x86"}deriveMachineType(e){let{os:r,cpuCores:n,deviceMemory:t}=e,s=t||parseInt(e.memory)||0;return r==="iOS"||r==="Android"?"Mobile":n>=8&&s>=16?"High-End Desktop":n>=4&&s>=8?"Mid-Range Desktop":"Budget/Laptop"}submitBenchmark(e){return m(this,null,function*(){if(!this.API_URL)return{success:!1,error:"API not configured"};try{let r=yield fetch(this.API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=yield r.json();return r.ok?{success:!0,id:n.id}:{success:!1,error:n.error||"Unknown error"}}catch(r){return{success:!1,error:String(r)}}})}getBenchmarkHistory(e){return m(this,null,function*(){if(!this.API_URL)return{success:!0,benchmarks:u};try{let r=e?"?"+Object.entries(e).filter(([,o])=>o!==void 0).map(([o,c])=>`${o}=${encodeURIComponent(String(c))}`).join("&"):"",n=yield fetch(`${this.API_URL}${r}`);if(!n.ok)throw new Error(`HTTP ${n.status}`);let t=yield n.json();return{success:!0,benchmarks:t.benchmarks?.length>0?t.benchmarks:u}}catch{return{success:!0,benchmarks:u}}})}getBenchmarkDetails(e){return m(this,null,function*(){let r=u.find(n=>n.id===e)?.fullData;if(r)return{success:!0,data:r};if(!this.API_URL)return{success:!1};try{let n=yield fetch(`${this.API_URL}/${e}`);if(!n.ok)throw new Error(`HTTP ${n.status}`);let s=(yield n.json()).benchmark;return s?{success:!0,data:s}:{success:!1}}catch{return{success:!1}}})}exportAsJSON(e){let r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(r),t=document.createElement("a");t.href=n,t.download=`signaltree-benchmark-${e.id}.json`,t.click(),URL.revokeObjectURL(n)}exportAsCSV(e){let r=["ID","Date","Winner","Score","Reliability","Machine Type","Tests","Duration (s)"],n=e.map(i=>[i.id,new Date(i.timestamp).toLocaleString(),i.summary.winnerLibrary,i.summary.winnerScore.toFixed(1),i.summary.reliabilityScore,i.summary.machineType,i.summary.totalTests,i.summary.duration.toFixed(1)]),t=[r,...n].map(i=>i.join(",")).join(`
`),s=new Blob([t],{type:"text/csv"}),o=URL.createObjectURL(s),c=document.createElement("a");c.href=o,c.download=`signaltree-benchmarks-${Date.now()}.csv`,c.click(),URL.revokeObjectURL(o)}static \u0275fac=function(r){return new(r||l)};static \u0275prov=d({token:l,factory:l.\u0275fac,providedIn:"root"})};export{g as a};
