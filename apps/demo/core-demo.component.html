<div class="container">
  <h1>ğŸ“ SignalTree Core</h1>

  <!-- Explanation Card -->
  <div class="explanation-card">
    <h2>ğŸŒ³ What is SignalTree?</h2>
    <p class="intro-text">
      <strong>JSON branches, reactive leaves.</strong> SignalTree treats your
      state like a tree â€” the branches are your JSON paths, and the leaves are
      reactive signals you read and write. No actions. No reducers. No
      selectors. Just data that reacts.
    </p>

    <div class="how-it-works">
      <h3>ğŸ’¡ How It Works</h3>
      <ol class="instruction-list">
        <li>
          <strong>Create a SignalTree:</strong> Define your state structure with
          <code>signalTree(initialState)</code>
        </li>
        <li>
          <strong>Access State:</strong> Use
          <code>tree.$.path.to.value()</code> to read values reactively
        </li>
        <li>
          <strong>Update State:</strong> Use
          <code>tree.$.path.to.value.set(newValue)</code> to update values
        </li>
        <li>
          <strong>Computed Values:</strong> Use Angular's
          <code>computed()</code> for derived state that updates automatically
        </li>
      </ol>
    </div>

    <div class="key-features">
      <h3>âœ¨ Key Features</h3>
      <div class="feature-tags">
        <span class="feature-tag">ğŸŒ³ JSON Branches</span>
        <span class="feature-tag">ğŸƒ Reactive Leaves</span>
        <span class="feature-tag">ğŸ¯ Type-Safe API</span>
        <span class="feature-tag">âš¡ Zero Boilerplate</span>
      </div>
    </div>
  </div>

  <!-- Demo Grid -->
  <div class="demo-grid">
    <!-- Todo Management Card -->
    <div class="card todos-card">
      <h2>ğŸ“‹ Todo Management</h2>
      <p class="card-description">
        Add, toggle, and manage todos with reactive state updates
      </p>

      <!-- Add Todo Section -->
      <div class="add-todo-section">
        <label for="new-todo">Add New Todo</label>
        <div class="input-group">
          <input
            id="new-todo"
            type="text"
            [(ngModel)]="newTodoTitle"
            (keyup.enter)="addTodo()"
            placeholder="What needs to be done?"
            class="form-input"
          />
          <button
            (click)="addTodo()"
            [disabled]="!newTodoTitle.trim()"
            class="btn-primary"
          >
            Add
          </button>
        </div>
      </div>

      <!-- Filter Section -->
      <div class="filter-section">
        <button
          (click)="setFilter('all')"
          [class.active]="filter() === 'all'"
          class="btn-filter"
        >
          All ({{ totalCount() }})
        </button>
        <button
          (click)="setFilter('active')"
          [class.active]="filter() === 'active'"
          class="btn-filter"
        >
          Active ({{ activeCount() }})
        </button>
        <button
          (click)="setFilter('completed')"
          [class.active]="filter() === 'completed'"
          class="btn-filter"
        >
          Completed ({{ completedCount() }})
        </button>
      </div>

      <!-- Todos List -->
      <div class="todos-list">
        @if (filteredTodos().length === 0) {
        <div class="empty-state">
          <p>
            @if (filter() === 'all') { ğŸ‰ No todos yet! Add one above to get
            started. } @else if (filter() === 'active') { âœ¨ No active todos!
            You're all caught up. } @else { ğŸ“­ No completed todos yet. }
          </p>
        </div>
        } @else { @for (todo of filteredTodos(); track trackByTodoId($index,
        todo)) {
        <div class="todo-item" [class.completed]="todo.completed">
          <input
            type="checkbox"
            [checked]="todo.completed"
            (change)="toggleTodo(todo.id)"
          />
          <span class="todo-title">{{ todo.title }}</span>
          <button
            (click)="deleteTodo(todo.id)"
            class="btn-delete btn-xs"
            title="Delete todo"
          >
            ğŸ—‘ï¸
          </button>
        </div>
        } }
      </div>

      <!-- Bulk Actions -->
      @if (hasAnyTodos()) {
      <div class="bulk-actions">
        <button
          (click)="toggleAll()"
          class="btn-secondary btn-sm"
          [title]="
            allCompleted() ? 'Mark all as active' : 'Mark all as completed'
          "
        >
          {{ allCompleted() ? 'â†©ï¸ Uncheck All' : 'âœ… Check All' }}
        </button>

        @if (hasCompletedTodos()) {
        <button (click)="clearCompleted()" class="btn-warning btn-sm">
          ğŸ§¹ Clear Completed
        </button>
        }

        <button (click)="clearAll()" class="btn-danger btn-sm">
          ğŸ—‘ï¸ Clear All
        </button>
      </div>
      }

      <!-- Quick Actions -->
      <div class="quick-actions">
        <button (click)="addRandomTodos()" class="btn-success btn-sm">
          ğŸ² Add 5 Random Todos
        </button>
      </div>
    </div>

    <!-- Statistics Card -->
    <div class="card stats-card">
      <h2>ğŸ“Š Statistics</h2>
      <p class="card-description">
        Real-time computed values that update automatically
      </p>

      <div class="stats-grid">
        <div class="stat-item total">
          <div class="stat-icon">ğŸ“</div>
          <div class="stat-content">
            <div class="stat-label">Total Todos</div>
            <div class="stat-value">{{ totalCount() }}</div>
          </div>
        </div>

        <div class="stat-item active">
          <div class="stat-icon">â³</div>
          <div class="stat-content">
            <div class="stat-label">Active</div>
            <div class="stat-value">{{ activeCount() }}</div>
          </div>
        </div>

        <div class="stat-item completed">
          <div class="stat-icon">âœ…</div>
          <div class="stat-content">
            <div class="stat-label">Completed</div>
            <div class="stat-value">{{ completedCount() }}</div>
          </div>
        </div>

        <div class="stat-item progress">
          <div class="stat-icon">ï¿½ï¿½</div>
          <div class="stat-content">
            <div class="stat-label">Progress</div>
            <div class="stat-value">
              @if (totalCount() === 0) { 0% } @else {
              {{ ((completedCount() / totalCount()) * 100).toFixed(0) }}% }
            </div>
          </div>
        </div>
      </div>

      <!-- Progress Bar -->
      @if (hasAnyTodos()) {
      <div class="progress-section">
        <div class="progress-label">Completion Progress</div>
        <div class="progress-bar">
          <div
            class="progress-fill"
            [style.width.%]="(completedCount() / totalCount()) * 100"
          ></div>
        </div>
      </div>
      }

      <!-- Code Example -->
      <div class="code-example">
        <h3>ğŸ’» Example Code</h3>
        <pre><code>// Create a SignalTree
const tree = signalTree(&#123;
  todos: [],
  filter: 'all'
&#125;);

// Access state signals
const todos = tree.state.todos;
const filter = tree.state.filter;

// Update state
tree.state.todos.set([...todos(), newTodo]);

// Computed values
const activeCount = computed(() =>
  todos().filter(t => !t.completed).length
);</code></pre>
      </div>
    </div>
  </div>
</div>
